import Image from 'next/image'
import { ImageSwitch } from '../_components/image-switch.tsx'
import { Notes } from '../_components/notes.tsx'
import { Column, MainSlide, TwoColumns } from '../_components/slide-layouts.tsx'
import edgeExplained from './images/edge-explained.png'
import edge from './images/edge.webp'


<TwoColumns>
  <Column className="flex flex-col justify-center items-center gap-4">
  
    # To the edge and back

  </Column>

  <Column className="flex flex-row justify-center items-center">
    <ImageSwitch images={[
      <Image key={edge.src} src={edge} alt="Edge"/>,
      <Image key={edgeExplained.src} src={edgeExplained} alt="Edge explained"/>
    ]} />

  </Column>
</TwoColumns>


<Notes>

When started using nextjs and vercel there were quite a significant push to run things more on edge, and we went with it. Most of the time it worked really well, but we did see some unexpected latencies from time to time which was quite annoying since we couldn't reproduce them in a reliable way. The latencies do make sense when we started to think about it. When running things on the edge basically all our requests to the underlying API needs to travel further and that could cause unexpected latencies. Moving the computation to serverless which will run closer to the underlying APIs will make things more reliable when it comes to latencies. Does this mean you should never user edge? Definitely not. If you have the data co-located with your edge nodes you can definitely run on edge, or if you maybe have only a few API calls. I can't tell you what to do, but be sure to test your assumptions.

What we did instead of edge was to move almost everything to static pages instead. Going from a dynamic environment on edge to a static with serverless was something we started a couple of days before we went 100% live and finished about 1-2 hours before the final switch. It was definitely a risky move, but I do think it was the right one since we also started a campaign at the same time as we went live. The performance was great and we could easily handle the load that came.

</Notes>
